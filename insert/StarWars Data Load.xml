<export><workspace name="StarWars Data Load"><query name="Load Star Wars JSON and Binary Data" focus="true" active="true" mode="javascript">
  declareUpdate();
  var pathToJson = '/Users/tamaspiros/Desktop/workshops/mlu-sw/data/json';
  var pathToImage = '/Users/tamaspiros/Desktop/workshops/mlu-sw/data/image';
  var jsonDocs = xdmp.filesystemDirectory(pathToJson);
  var imageDocs = xdmp.filesystemDirectory(pathToImage);

  jsonDocs.toArray().forEach(function(doc) {
  xdmp.documentLoad(doc.pathname,
  {
  'uri': '/character/' + doc.filename,
  'collections': 'character',
  'permissions': xdmp.defaultPermissions()
  }
  );
  });

  imageDocs.toArray().forEach(function(doc) {
  xdmp.documentLoad(doc.pathname,
  {
  'uri': '/image/' + doc.filename,
  'collections': 'image',
  'permissions': xdmp.defaultPermissions()
  }
  );
  });
</query></workspace></export>
